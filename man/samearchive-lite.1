.TH SAMEARCHIVE-LITE 1 "14 APRIL 2009" "" SAMESAME
.\"
.\" $Id: samearchive-lite.1,v 1.0 2009/01/01 00:00:00 akruijff Exp $
.\"
.\" To format this file into a text file say
.\"
.\"    nroff -man samearchive-lite.1              or
.\"    groff -mandoc -Tascii samearchive.1
.\"
.\" Copyright (c) 2009 Alex de Kruijff.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

.SH NAME

\fBsamearchive-lite\fP - find identical files, while keeping archives intact
.SH SYNOPSIS

\fBsamearchive-lite\fP [\fB-g\fP \fIsize\fP] [\fB-m\fP \fIsize\fP] 
[\fB-S\fP \fIsep\fP] [\fB-0qVv\fP] \fIdir1\fP \fIdir2\fP [...]
.SH DESCRIPTION

.B samearchive-lite
reads the paths from the input from stdin and output the identical 
files. This program is written for the special case where each 
directory acts as an archive or backup. The output will only contain
filename pairs that have the same relative path from the archive base.  

This version uses a lot less memory then samefile and is faster, but
only find a partial set of identical files. It basicaly does 80% of the
job, but does this in 50% of the time while using 10% of the resources
compared to \fBsamearchive\fP.

The output will only contain filename pairs that have the same relative
path. For each filename pair with identical contents, a
line consisting of six fields is output:
The size in bytes, two filenames, the character ``='' if
the two files are on the same device, ``X'' otherwise,
and the link counts of the two files.
The output is sorted in reverse order by size as the primary key
and a user defined field(s) as the secondary key.
.SH OPTIONS

.IP \fB-0\fP
Indicates that the input list of file names is NUL terminated,
for example as generated by implementations of
.BR find (1)
that support the
.B -print0
option.
Without this option, the file names are assumed to be newline terminated.
.IP "\fB-g\fP \fIsize\fP"
Compare only files with size greater than
.I size
bytes. Default is 0.
.IP "\fB-m\fP \fIsize\fP"
Compare only files with size less or equal than
.I size
bytes. Default is 0 which indicates there is no limit.
.IP \fB-q\fP
This option keep the information you are recieved during the processes
to a minimum. (Verbose level 0)
.IP "\fB-S\fP \fIsep\fP"
Use string \fIsep\fP as the output field separator, defaults to a tab
character. Useful if filenames contain tab characters and output must be
processed by another program, say \fBawk\fR (1)\fP.
.IP \fB-V\fP
Print the version information and exit.
.IP \fB-v\fP
This option increases the amount of information you recieve while
running \fBsamearchive-lite\fP. At level 0 you will just see the error
messages. At level 1 you will see warning messages indicating that
\fBsamearchive-lite\fP coudn't do something. Defaults to verbose level 1.
.SH EXAMPLES

Find all identical files with in the system archives that live within
the current working directory:

.nf
% find system-arch1 | samearchive system-arch1 system-arch*
.fi
.SH DIAGNOSTICS

\fBinaccessible:\fP <\fIpath\fP>
This is probably due to a 'permission denied' error on files or
directories within the given \fIpath\fP for which you have no read
permission.
   
\fBunreadable:\fP <\fIpath\fP>
The file could be opend for reading jet failed while reading. You
shouldn't encounter such a warnings but if you do, and recieve more
than a few, this could be very well due to failing hard disk.

\fBSkipped line \fP\fIpath\fP\fB because it didn't start with
\fP\fI%s\fP\fB.\fP This indicates that the former path was skipped
because the it didn't start with first argument on the command prompt.
.SH "SEE ALSO"

.BR samearchive (1)
.BR samefile (1)
.BR samelink (1)
.BR find (1)
.BR ls (1)
.SH NOTES

Input filenames must not have leading or trailing
white space unless the white space is part of
the filename.
.SH AUTHOR

Alex de Kruijff

